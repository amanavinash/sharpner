
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
     <form onsubmit="aman(event)">
        <label> Unique order Id</label>
        <input id='number' type="number" name="number" />
        <label> choose Price</label>
        <input id='text' type="number" name="text" />
        <label> choose dish</label>
        <input id='textt' type="text" name="textt" />

        <label class="my-1 mr-2">choose table</label>
        <select class="custom-select my-1 mr-sm-2" id='category' type="text" name="category">
            <option selected></option>
            <option value="table1">table 1 </option>
            <option value="table2"> table 2</option>
            <option value="table3"> table 3</option>
        </select>
        <button> Add Product </button>
    </form>
    <h1>Orders</h1>
    <h2>table 1</h2>
    <ul id="listOfUsers"></ul>
    <h2>table 2</h2>
    <ul id="listOfUserss"></ul>
    <h2>table 3</h2>
    <ul id="listOfUsersss"></ul>
    
    <script>
        function aman(event) {
            event.preventDefault();
            const number = event.target.number.value;
            const text = event.target.text.value;
            const textt = event.target.textt.value;
            const category = event.target.category.value;
            const obj = {
                number,
                text,
                textt,
                category
            }
            localStorage.setItem(obj.email, JSON.stringify(obj))
                showNewUserOnScreen(obj)
        }
        window.addEventListener("DOMContentLoaded", () => {
            const localStorageObj = localStorage;
                const localstoragekeys  = Object.keys(localStorageObj)

                for(var i =0; i< localstoragekeys.length; i++){
                    const key = localstoragekeys[i]
                    const userDetailsString = localStorageObj[key];
                    const userDetailsObj = JSON.parse(userDetailsString);
                    showNewUserOnScreen(userDetailsObj)
                }
        })
        function showNewUserOnScreen(user) {
            document.getElementById('text').value = '';
            document.getElementById('number').value = '';
            document.getElementById('category').value = '';
            document.getElementById('textt').value = '';
            if (localStorage.getItem(user.text)!== null) {
                removeUserFromScreen(user.text)
            }
            if (user.category == "table1") {
                const parentNode = document.getElementById('listOfUsers');
                const childHTML = `<li id=${user.number}>  ${user.text}-${user.textt}-${user.category}
                                         <button onclick=deleteUser('${user.number}','${user.category}')> Delete User </button>
                                                                 </li>`
                parentNode.innerHTML = parentNode.innerHTML + childHTML;
            }
            if (user.category =='table2') {
                const parentNodee = document.getElementById('listOfUserss');
                const childHTMLL = `<li id=${user.number}> ${user.text}-${user.textt}-${user.category}
                                        <button onclick=deleteUser('${user.number}','${user.category}')> Delete User </button>
                                                            </li>`
                parentNodee.innerHTML = parentNodee.innerHTML + childHTMLL;
            }
            if (user.category == "table3") {
                const parentNodee = document.getElementById('listOfUsersss');
                const childHTMLL = `<li id=${user.number}> ${user.text}-${user.textt}-${user.category}
                    <button onclick=deleteUser('${user.number}','${user.category}')> Delete User </button>  
                                                                </li>`
                parentNodee.innerHTML = parentNodee.innerHTML + childHTMLL;
             }
        }





        function deleteUser(userId,category) {
            
                console.log(userId,category)
                localStorage.removeItem(userId,category);
                removeUserFromScreen(userId,category);  

        }

        function removeUserFromScreen(userId,category) {
        if(category=='table1') {
                const parentNode = document.getElementById('listOfUsers');
        
                const childNodeToBeDeleted = document.getElementById(userId);
                if (childNodeToBeDeleted) {
                    parentNode.removeChild(childNodeToBeDeleted)
                }
            }
                if(category=='table2') {
                const parentNode = document.getElementById('listOfUserss');
        
                const childNodeToBeDeleted = document.getElementById(userId);
                if (childNodeToBeDeleted) {
                    parentNode.removeChild(childNodeToBeDeleted)
                }
            }
            if (category =='table3') {
                const parentNode = document.getElementById('listOfUsersss');
                const childNodeToBeDeleted= document.getElementById(userId);
                if (childNodeToBeDeleted) {
                    parentNode.removeChild(childNodeToBeDeleted)
                }
            }
        }

    </script>


</body>

</html>
  